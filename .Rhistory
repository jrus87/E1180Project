Seattle.Merged$Est[j] <- 1
table(Seattle.Merged$Est)
j <- which(grepl("AMERICAN MARY", Seattle.Merged$Name.Ret)) # 2014-07
unique(Seattle.Merged[j,1])
j <- which(grepl("4XX BLOCK OF PINE ST", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("4XX BLOCK OF PINE ST", Seattle.Merged$Address.Narc) &
grepl("2015-06", Seattle.Merged$Month.Narc)) # earliest date -> observation 95160
which(j==73677) # 18th j
j <- j[-c(1:421)]
Seattle.Merged$Est[j] <- 1
table(Seattle.Merged$Est)
j <- which(grepl("OZ.", Seattle.Merged$Name.Ret)) # 2015-05
unique(Seattle.Merged[j,1])
j <- which(grepl("19XX BLOCK OF 2ND AVE", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("19XX BLOCK OF 2ND AVE", Seattle.Merged$Address.Narc) &
grepl("2015-12", Seattle.Merged$Month.Narc)) # earliest date -> observation 73677
which(j==22397) # 422th j
j <- j[-c(1:70)]
Seattle.Merged$Est[j] <- 1
table(Seattle.Merged$Est)
j <- which(grepl("GANJA GODDESS", Seattle.Merged$Name.Ret)) # 2014-11
unique(Seattle.Merged[j,1])
j <- which(grepl("1 AV / BELL ST", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("1 AV / BELL ST", Seattle.Merged$Address.Narc) &
grepl("2014-12", Seattle.Merged$Month.Narc)) # earliest date -> observation 22397
which(j==113) # 71th j
j <- which(grepl("1 AV / BELL ST", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("1 AV / BELL ST", Seattle.Merged$Address.Narc) &
grepl("2014-12", Seattle.Merged$Month.Narc)) # earliest date -> observation 113
which(j==113) # 71th j
j <- which(grepl("19XX BLOCK OF 2ND AVE", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("19XX BLOCK OF 2ND AVE", Seattle.Merged$Address.Narc) &
grepl("2015-12", Seattle.Merged$Month.Narc)) # earliest date -> observation 22397
which(j==22397) # 71th j
j <- which(grepl("1 AV / BELL ST", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("1 AV / BELL ST", Seattle.Merged$Address.Narc) &
grepl("2014-12", Seattle.Merged$Month.Narc)) # earliest date -> observation 113
which(j==113) # 71th j
j <- j[-c(1:70)]
Seattle.Merged$Est[j] <- 1
table(Seattle.Merged$Est)
j <- which(grepl("UNCLE IKE'S", Seattle.Merged$Name.Ret)) # 2014-09
unique(Seattle.Merged[j,1])
j <- which(grepl("21XX BLOCK OF S NORMAN ST", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("21XX BLOCK OF S NORMAN ST", Seattle.Merged$Address.Narc) &
grepl("2014-11", Seattle.Merged$Month.Narc)) # earliest date -> observation 113
which(j==35807) # 71th j
j <- j[-c(1:17)]
Seattle.Merged$Est[j] <- 1
table(Seattle.Merged$Est)
table(Seattle.Merged$Name.Ret, Seattle.Merged$Established.Ret)
j <- which(grepl("DIEGO PELLICER", Seattle.Merged$Name.Ret))
unique(Seattle.Merged[j,1])
j <- which(grepl("3XX BLOCK OF PIKE ST", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
table(Seattle.Merged$Name.Ret, Seattle.Merged$Established.Ret)
j <- which(grepl("3XX BLOCK OF PIKE ST", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("3XX BLOCK OF PIKE ST", Seattle.Merged$Address.Narc) &
grepl("2016-10", Seattle.Merged$Month.Narc)) # earliest date -> observation 35807
which(j==64348) # 18th j
j <- j[-c(1:253)]
Seattle.Merged$Est[j] <- 1
j <- which(grepl("HERBAN LEGENDS", Seattle.Merged$Name.Ret)) # 2016-04
unique(Seattle.Merged[j,1])
j <- which(grepl("6XX BLOCK OF 2 AV", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("6XX BLOCK OF 2 AV", Seattle.Merged$Address.Narc) &
grepl("2016-04", Seattle.Merged$Month.Narc)) # earliest date -> observation 64348
which(j==86192) # 254h j
j <- j[-c(1:22)]
Seattle.Merged$Est[j] <- 1
j <- which(grepl("POT SHOP", Seattle.Merged$Name.Ret)) # 2016-03
unique(Seattle.Merged[j,1])
j <- which(grepl("20XX BLOCK OF WESTERN AVE", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("20XX BLOCK OF WESTERN AVE", Seattle.Merged$Address.Narc) &
grepl("2016-03", Seattle.Merged$Month.Narc)) # earliest date -> observation 86192
which(j==34825) # 23h j
j <- j[-c(1:37)]
Seattle.Merged$Est[j] <- 1
j <- which(grepl("POT STOP", Seattle.Merged$Name.Ret)) # 2016-03
unique(Seattle.Merged[j,1])
j <- which(grepl("75XX BLOCK OF SEWARD PARK AVE S", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("75XX BLOCK OF SEWARD PARK AVE S", Seattle.Merged$Address.Narc) &
grepl("2016-03", Seattle.Merged$Month.Narc)) # earliest date -> observation 34825
which(j==89441) # 38th j
j <- j[-c(1)]
Seattle.Merged$Est[j] <- 1
j <- which(grepl("UNCLE IKES", Seattle.Merged$Name.Ret)) # 2016-06
unique(Seattle.Merged[j,1])
j <- which(grepl("XX BLOCK OF THOMAS ST", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("XX BLOCK OF THOMAS ST", Seattle.Merged$Address.Narc) &
grepl("2016-06", Seattle.Merged$Month.Narc)) # earliest date -> observation 89441
which(j==65125) # 2th j
j <- j[-c(1:52)]
Seattle.Merged$Est[j] <- 1
j <- which(grepl("VELA", Seattle.Merged$Name.Ret)) # 2016-08
unique(Seattle.Merged[j,1])
j <- which(grepl("15XX BLOCK OF 2ND AVE", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("15XX BLOCK OF 2ND AVE", Seattle.Merged$Address.Narc) &
grepl("2016-08", Seattle.Merged$Month.Narc)) # earliest date -> observation 65125
which(j==14329) # 53th j
j <- j[-c(1:329)]
Seattle.Merged$Est[j] <- 1
table(Seattle.Merged$Est)
# Setting our working directory
wrkdir <- c('C:/Users/Benji/Desktop/Statistics/Git/Repositories/E1180Project',
'~/Hertie School/Fall 2016/CollaborativeSocialScienceDataAnalysis/CSSR')
repmis::set_valid_wd(wrkdir)
rm(wrkdir)
source("./Codes/Cleaning_Analysis_Seattle.R")
# 1. How many Producers/Processors and Retailers per year for Washington
# 1.a Create unique Producers/Processors and Retailers lengths for barplot
Retailer2014 <- Retailer[which(Retailer$Month=="2014-12"),]
Retailer2015 <- Retailer[which(Retailer$Month=="2015-12"),]
Retailer2016 <- Retailer[which(Retailer$Month!="2015-12" & Retailer$Month!="2014-12"),]
Retailer2014.uniq <- as.numeric(length(which(!duplicated(Retailer2014$RetailerURLLink))))
Retailer2015.uniq <- as.numeric(length(which(!duplicated(Retailer2015$RetailerURLLink))))
Retailer2016.uniq <- as.numeric(length(which(!duplicated(Retailer2016$RetailerURLLink))))
ProdProc2014 <- ProdProc[which(ProdProc$Month=="2014-12"),]
ProdProc2015 <- ProdProc[which(ProdProc$Month=="2015-12"),]
ProdProc2016 <- ProdProc[which(ProdProc$Month!="2015-12" & ProdProc$Month!="2014-12"),]
ProdProc2014.uniq <- as.numeric(length(which(!duplicated(ProdProc2014$Name))))
ProdProc2015.uniq <- as.numeric(length(which(!duplicated(ProdProc2015$Name))))
ProdProc2016.uniq <- as.numeric(length(which(!duplicated(ProdProc2016$Name))))
# 1.b Create the barplot
Year <- as.character(c(2014:2016))
WA.numbers <- c(ProdProc2014.uniq, ProdProc2015.uniq, ProdProc2016.uniq,
Retailer2014.uniq, Retailer2015.uniq, Retailer2016.uniq)
WA.name <- c("Producer/Processor", "Producer/Processor", "Producer/Processor",
"Retailer", "Retailer", "Retailer")
WA.bar <- data.frame(Year, WA.numbers, WA.name, stringsAsFactors = FALSE)
washington.barplot <- ggplot(WA.bar, aes(x=Year, y=WA.numbers, fill=WA.name)) +
geom_bar(stat="identity", colour="black",width=.8, position=position_dodge()) +
theme_bw() + xlab("Year") + ylab("Frequency") + scale_fill_hue(name="Form of business") +
ggtitle("Number of Producers and Processors in WA")
washington.barplot
rm(Retailer2016.uniq, Retailer2015.uniq, Retailer2014.uniq, Retailer2016, Retailer2015, Retailer2014,
ProdProc2016.uniq, ProdProc2015.uniq, ProdProc2014.uniq, ProdProc2016, ProdProc2015, ProdProc2014,
WA.bar, WA.name, WA.numbers)
# 2. How many Producers/Processors and Retailers per year for King County
Retailer2014 <- Retailer[which(Retailer$Month=="2014-12"),]
Retailer2015 <- Retailer[which(Retailer$Month=="2015-12"),]
Retailer2016 <- Retailer[which(Retailer$Month!="2015-12" & Retailer$Month!="2014-12"),]
Retailer2014.uniq <- as.numeric(length(which(!duplicated(Retailer2014$RetailerURLLink))))
Retailer2015.uniq <- as.numeric(length(which(!duplicated(Retailer2015$RetailerURLLink))))
Retailer2016.uniq <- as.numeric(length(which(!duplicated(Retailer2016$RetailerURLLink))))
ProdProc2014 <- ProdProc[which(ProdProc$Month=="2014-12"),]
ProdProc2015 <- ProdProc[which(ProdProc$Month=="2015-12"),]
ProdProc2016 <- ProdProc[which(ProdProc$Month!="2015-12" & ProdProc$Month!="2014-12"),]
ProdProc2014.uniq <- as.numeric(length(which(!duplicated(ProdProc2014$Name))))
ProdProc2015.uniq <- as.numeric(length(which(!duplicated(ProdProc2015$Name))))
ProdProc2016.uniq <- as.numeric(length(which(!duplicated(ProdProc2016$Name))))
# 1.b Create the barplot
Year <- as.character(c(2014:2016))
WA.numbers <- c(ProdProc2014.uniq, ProdProc2015.uniq, ProdProc2016.uniq,
Retailer2014.uniq, Retailer2015.uniq, Retailer2016.uniq)
WA.name <- c("Producer/Processor", "Producer/Processor", "Producer/Processor",
"Retailer", "Retailer", "Retailer")
WA.bar <- data.frame(Year, WA.numbers, WA.name, stringsAsFactors = FALSE)
washington.barplot <- ggplot(WA.bar, aes(x=Year, y=WA.numbers, fill=WA.name)) +
geom_bar(stat="identity", colour="black",width=.8, position=position_dodge()) +
theme_bw() + xlab("Year") + ylab("Frequency") + scale_fill_hue(name="Form of business") +
ggtitle("Number of Producers and Processors in WA")
washington.barplot
rm(Retailer2016.uniq, Retailer2015.uniq, Retailer2014.uniq, Retailer2016, Retailer2015, Retailer2014,
ProdProc2016.uniq, ProdProc2015.uniq, ProdProc2014.uniq, ProdProc2016, ProdProc2015, ProdProc2014,
WA.bar, WA.name, WA.numbers)
# 2.a How many Producers/Processors and Retailer per year for King County
Retailer.KC2014 <- KingCounty.Retailer[which(KingCounty.Retailer$Month=="2014-12"),]
Retailer.KC2015 <- KingCounty.Retailer[which(KingCounty.Retailer$Month=="2015-12"),]
Retailer.KC2016 <- KingCounty.Retailer[which(KingCounty.Retailer$Month!="2015-12" & KingCounty.Retailer$Month!="2014-12"),]
Retailer.KC2014.uniq <- as.numeric(length(which(!duplicated(Retailer.KC2014$RetailerURLLink))))
Retailer.KC2015.uniq <- as.numeric(length(which(!duplicated(Retailer.KC2015$RetailerURLLink))))
Retailer.KC2016.uniq <- as.numeric(length(which(!duplicated(Retailer.KC2016$RetailerURLLink))))
ProdProc.KC2014 <- KingCounty.ProdProc[which(KingCounty.ProdProc$Month=="2014-12"),]
ProdProc.KC2015 <- KingCounty.ProdProc[which(KingCounty.ProdProc$Month=="2015-12"),]
ProdProc.KC2016 <- KingCounty.ProdProc[which(KingCounty.ProdProc$Month!="2015-12" & KingCounty.ProdProc$Month!="2014-12"),]
ProdProc.KC2014.uniq <- as.numeric(length(which(!duplicated(ProdProc.KC2014$Name))))
ProdProc.KC2015.uniq <- as.numeric(length(which(!duplicated(ProdProc.KC2015$Name))))
ProdProc.KC2016.uniq <- as.numeric(length(which(!duplicated(ProdProc.KC2016$Name))))
# 2.b Create the barplot
KC.numbers <- c(ProdProc.KC2014.uniq, ProdProc.KC2015.uniq, ProdProc.KC2016.uniq,
Retailer.KC2014.uniq, Retailer.KC2015.uniq, Retailer.KC2016.uniq)
KC.name <- c("Producer/Processor", "Producer/Processor", "Producer/Processor",
"Retailer", "Retailer", "Retailer")
KC.bar <- data.frame(Year, KC.numbers, KC.name, stringsAsFactors = FALSE)
kingcounty.barplot <- ggplot(KC.bar, aes(x=Year, y=KC.numbers, fill=KC.name)) +
geom_bar(stat="identity", colour="black",width=.8, position=position_dodge()) +
theme_bw() + xlab("Year") + ylab("Frequency") + scale_fill_hue(name="Form of business") +
ggtitle("Number of Producers and Processors in King County")
kingcounty.barplot
rm(Retailer.KC2016.uniq, Retailer.KC2015.uniq, Retailer.KC2014.uniq, Retailer.KC2016, Retailer.KC2015, Retailer.KC2014,
ProdProc.KC2016.uniq, ProdProc.KC2015.uniq, ProdProc.KC2014.uniq, ProdProc.KC2016, ProdProc.KC2015, ProdProc.KC2014,
KC.bar, KC.name, KC.numbers)
# 3. Sales and Excise Taxes for equivalent ofo 1 and 2
# Draw map of Seattle
map.seattle_city <- qmap("seattle", zoom = 11, source="stamen", maptype="toner",darken = c(.3,"#BBBBBB"))
map.seattle_city +
geom_polygon(data=Seattle.SOE, aes(x=lon,y=lat, group=group, fill=percent, color=muted("blue"), alpha=0.9)) +
scale_fill_gradient2(breaks=pretty_breaks(n=5), guide=guide_legend(title="Percent living > $200k", keywidth = 2)) +
geom_point(data=Seattle.Merged, aes(x=lon.Narc, y=lat.Narc), color="dark green", alpha=0.03, size=1.1) +
geom_point(data=Seattle.Merged, aes(x=lon.Ret, y=lat.Ret), color="dark red", size=2) +
theme_nothing(legend=TRUE) +
labs(title = "Crime in Seattle")
# legend of all different narcotic crimes (looks to me like many on street -> dui? also is there a sub-difference of dui reason?)
table(Seattle.Merged$Event.Clearance.Description)
Narc <- which(grepl("LIQUOR", Seattle.Merged$Event.Clearance.Description))
Narc2 <- which(grepl("DUI", Seattle.Merged$Event.Clearance.Description))
Only.Narcotics <- Seattle.Merged[-c(Narc, Narc2),]
map.seattle_city +
geom_polygon(data=Seattle.SOE, aes(x=lon,y=lat, group=group, fill=percent, color=muted("blue"), alpha=0.9)) +
scale_fill_gradient2(breaks=pretty_breaks(n=5), guide=guide_legend(title="Percent living > $200k", keywidth = 2)) +
geom_point(data=Only.Narcotics, aes(x=lon.Narc, y=lat.Narc), color="dark green", alpha=0.03, size=1.1) +
geom_point(data=Seattle.Merged, aes(x=lon.Ret, y=lat.Ret), color="dark red", size=2) +
theme_nothing(legend=TRUE) +
labs(title = "Narcotic Crime in Seattle")
# it seems that there is no correlation apart from most Western and Northern Eastern Retailer
table(Only.Narcotics$Event.Clearance.Description)
Weed <- which(grepl("MARIJUANA", Only.Narcotics$Event.Clearance.Description))
Only.Weed <- Only.Narcotics[Weed,]
map.seattle_city +
geom_polygon(data=Seattle.SOE, aes(x=lon,y=lat, group=group, fill=percent, color=muted("blue"), alpha=0.9)) +
scale_fill_gradient2(breaks=pretty_breaks(n=5), guide=guide_legend(title="Percent living > $200k", keywidth = 2)) +
geom_point(data=Only.Weed, aes(x=lon.Narc, y=lat.Narc), color="dark green", alpha=0.03, size=1.1) +
geom_point(data=Seattle.Merged, aes(x=lon.Ret, y=lat.Ret), color="dark red", size=2) +
theme_nothing(legend=TRUE) +
labs(title = "Narcotic Crime in Seattle")
# Only near the Western Retailer
# cowplot next to each other
map.seattle_city +
geom_polygon(data=Seattle.SOE, aes(x=lon,y=lat, group=group, fill=percent, color=muted("blue"), alpha=0.9)) +
scale_fill_gradient2(breaks=pretty_breaks(n=5), guide=guide_legend(title="Percent living > $200k", keywidth = 2)) +
geom_point(data=Only.Weed, aes(x=lon.Narc, y=lat.Narc), color="dark green", alpha=0.03, size=1.1) +
geom_point(data=Seattle.Merged, aes(x=lon.Ret, y=lat.Ret), color="dark red", size=2) +
theme_nothing(legend=TRUE) +
labs(title = "Narcotic Crime in Seattle")
# Only near the Western Retailer
Seattle.Crime.Narcotics$Crime <- NA
Seattle.Crime.Narcotics$Crime <- 1
Seattle.Merged$Crime <- NA
Seattle.Merged$Crime <- 1
fit <- lm(Crime ~ Est,data=Seattle.Merged)
summary(fit)
names(Seattle.Merged)
table(Seattle.Merged$Event.Clearance.Description)
Seattle.Merged$Crime <- NA
Weed.Only <- which(grepl(" MARIJUANA PUBLIC USE (NOT DISPENSARY)"))
Weed.Only <- which(grepl(" MARIJUANA PUBLIC USE (NOT DISPENSARY)", Seattle.Merged$Event.Clearance.Description))
Seattle.Merged$Crime[Seattle.Merged[j,]] <- 1
Seattle.Merged$Crime[Seattle.Merged[j]] <- 1
Weed.Only <- which(grepl("MARIJUANA PUBLIC USE (NOT DISPENSARY)", Seattle.Merged$Event.Clearance.Description))
Narcotics.Only <- which(grepl("NARCOTICS", Seattle.Merged$Event.Clearance.Description))
Liquor.Only <- which(grepl("LIQUOR", Seattle.Merged$Event.Clearance.Description))
Other <- which(!grepl("LIQUOR", Seattle.Merged$Event.Clearance.Description) &
!grepl("NARCOTICS", Seattle.Merged$Event.Clearance.Description) &
!grepl("MARIJUANA PUBLIC USE (NOT DISPENSARY)", Seattle.Merged$Event.Clearance.Description))
Seattle.Merged$Crime[Other] <- 1
Seattle.Merged$Crime[Liquor.Only] <- 2
Seattle.Merged$Crime[Narcotics.Only] <- 3
Seattle.Merged$Crime[Weed.Only] <- 4
fit <- lm(Crime ~ Est, data=Seattle.Merged)
summary(fit)
table(Seattle.Merged$Crime)
Weed.Only <- which(grepl("MARIJUANA PUBLIC USE (NOT DISPENSARY)", Seattle.Merged$Event.Clearance.Description))
table(Seattle.Merged$Event.Clearance.Description)
Weed.Only <- which(grepl("MARIJUANA PUBLIC USE (NOT DISPENSARY)", Seattle.Merged$Event.Clearance.Description))
Weed.Only <- which(grepl("MARIJUANA", Seattle.Merged$Event.Clearance.Description))
Narcotics.Only <- which(grepl("NARCOTICS", Seattle.Merged$Event.Clearance.Description))
Liquor.Only <- which(grepl("LIQUOR", Seattle.Merged$Event.Clearance.Description))
Other <- which(!grepl("LIQUOR", Seattle.Merged$Event.Clearance.Description) &
!grepl("NARCOTICS", Seattle.Merged$Event.Clearance.Description) &
!grepl("MARIJUANA PUBLIC USE (NOT DISPENSARY)", Seattle.Merged$Event.Clearance.Description))
Seattle.Merged$Crime[Other] <- 1
Seattle.Merged$Crime[Liquor.Only] <- 2
Seattle.Merged$Crime[Narcotics.Only] <- 3
Seattle.Merged$Crime[Weed.Only] <- 4
fit <- lm(Crime ~ Est, data=Seattle.Merged)
summary(fit)
table(Seattle.Merged$Crime)
table(Seattle.Merged$Est)
Seattle.Merged$Est <- 0
# Add 1 for all of #HASHTAG
j <- which(grepl("#HASHTAG", Seattle.Merged$Name.Ret)) # 2015-04
unique(Seattle.Merged[j,1])
# 29XX BLOCK OF E MADISON ST
j <- which(grepl("29XX BLOCK OF E MADISON ST", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("29XX BLOCK OF E MADISON ST", Seattle.Merged$Address.Narc) &
grepl("2015-10", Seattle.Merged$Month.Narc)) # earliest date -> observation 42642
which(j==42642) # 5th j
j <- j[-c(1:4)]
Seattle.Merged$Est[j] <- 1
# Add 1 for all of PONDER
j <- which(grepl("PONDER", Seattle.Merged$Name.Ret)) # 2015-08
unique(Seattle.Merged[j,1])
# 1 AV / PINE ST
j <- which(grepl("1 AV / PINE ST", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("1 AV / PINE ST", Seattle.Merged$Address.Narc) &
grepl("2015-08", Seattle.Merged$Month.Narc)) # earliest date -> observation 1065
which(j==1065) # 124th j
j <- j[-c(1:123)]
Seattle.Merged$Est[j] <- 1
# Add 1 for all of RUCKUS
j <- which(grepl("RUCKUS", Seattle.Merged$Name.Ret)) # 2015-12
unique(Seattle.Merged[j,1])
# XX BLOCK OF THOMAS ST
j <- which(grepl("XX BLOCK OF THOMAS ST", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("XX BLOCK OF THOMAS ST", Seattle.Merged$Address.Narc) &
grepl("2015-12", Seattle.Merged$Month.Narc)) # earliest date -> observation 65123
which(j==65123) # 51th j
j <- j[-c(1:50)]
Seattle.Merged$Est[j] <- 1
# Add 1 for all of SEATTLE CANNABIS COMPANY
j <- which(grepl("SEATTLE CANNABIS COMPANY", Seattle.Merged$Name.Ret)) # 2015-02
unique(Seattle.Merged[j,1])
# 16XX BLOCK OF WESTERN AVE
j <- which(grepl("16XX BLOCK OF WESTERN AVE", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("16XX BLOCK OF WESTERN AVE", Seattle.Merged$Address.Narc) &
grepl("2015-12", Seattle.Merged$Month.Narc)) # earliest date -> observation 19912
which(j==19912) # 102th j
j <- j[-c(1:101)]
Seattle.Merged$Est[j] <- 1
# Add 1 for all of CANNABIS CITY
j <- which(grepl("CANNABIS CITY", Seattle.Merged$Name.Ret)) # 2014-07
unique(Seattle.Merged[j,1])
# 92XX BLOCK OF 16TH AVE SW
j <- which(grepl("92XX BLOCK OF 16TH AVE SW", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("92XX BLOCK OF 16TH AVE SW", Seattle.Merged$Address.Narc) &
grepl("2014-12", Seattle.Merged$Month.Narc)) # earliest date -> observation 95160
which(j==95160) # 18th j
j <- j[-c(1:17)]
Seattle.Merged$Est[j] <- 1
# Add 1 for all of AMERICAN MARY
j <- which(grepl("AMERICAN MARY", Seattle.Merged$Name.Ret)) # 2015-06
unique(Seattle.Merged[j,1])
# 4XX BLOCK OF PINE ST
j <- which(grepl("4XX BLOCK OF PINE ST", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("4XX BLOCK OF PINE ST", Seattle.Merged$Address.Narc) &
grepl("2015-06", Seattle.Merged$Month.Narc)) # earliest date -> observation 73677
which(j==73677) # 422th j
j <- j[-c(1:421)]
Seattle.Merged$Est[j] <- 1
# Add 1 for all of OZ.
j <- which(grepl("OZ.", Seattle.Merged$Name.Ret)) # 2015-05
unique(Seattle.Merged[j,1])
# 19XX BLOCK OF 2ND AVE
j <- which(grepl("19XX BLOCK OF 2ND AVE", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("19XX BLOCK OF 2ND AVE", Seattle.Merged$Address.Narc) &
grepl("2015-12", Seattle.Merged$Month.Narc)) # earliest date -> observation 22397
which(j==22397) # 71th j
j <- j[-c(1:70)]
Seattle.Merged$Est[j] <- 1
# Add 1 for all of GANJA GODDESS
j <- which(grepl("GANJA GODDESS", Seattle.Merged$Name.Ret)) # 2014-11
unique(Seattle.Merged[j,1])
# 1 AV / BELL ST
j <- which(grepl("1 AV / BELL ST", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("1 AV / BELL ST", Seattle.Merged$Address.Narc) &
grepl("2014-12", Seattle.Merged$Month.Narc)) # earliest date -> observation 113
which(j==113) # 71th j
j <- j[-c(1:70)]
Seattle.Merged$Est[j] <- 1
# Add 1 for all of UNCLE IKE'S
j <- which(grepl("UNCLE IKE'S", Seattle.Merged$Name.Ret)) # 2014-09
unique(Seattle.Merged[j,1])
# 21XX BLOCK OF S NORMAN ST
j <- which(grepl("21XX BLOCK OF S NORMAN ST", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("21XX BLOCK OF S NORMAN ST", Seattle.Merged$Address.Narc) &
grepl("2014-11", Seattle.Merged$Month.Narc)) # earliest date -> observation 35807
which(j==35807) # 18th j
j <- j[-c(1:17)]
Seattle.Merged$Est[j] <- 1
# For each Retailer founded since 2016, simply add a 1 to the newly created Est variable
# Left are: "DIEGO PELLICER", "HERBAN LEGENDS" (2016-04), "POT SHOP" (2016-03), "POT STOP (2016-03)", "UNCLE IKES (2016-06)", "VELA" (2016-08)
# Add 1 for all of DIEGO PELLICER
j <- which(grepl("DIEGO PELLICER", Seattle.Merged$Name.Ret)) # 2016-10
unique(Seattle.Merged[j,1])
# 3XX BLOCK OF PIKE ST
j <- which(grepl("3XX BLOCK OF PIKE ST", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("3XX BLOCK OF PIKE ST", Seattle.Merged$Address.Narc) &
grepl("2016-10", Seattle.Merged$Month.Narc)) # earliest date -> observation 64348
which(j==64348) # 254h j
j <- j[-c(1:253)]
Seattle.Merged$Est[j] <- 1
# Add 1 for all of HERBAN LEGENDS
j <- which(grepl("HERBAN LEGENDS", Seattle.Merged$Name.Ret)) # 2016-04
unique(Seattle.Merged[j,1])
# 6XX BLOCK OF 2 AV
j <- which(grepl("6XX BLOCK OF 2 AV", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("6XX BLOCK OF 2 AV", Seattle.Merged$Address.Narc) &
grepl("2016-04", Seattle.Merged$Month.Narc)) # earliest date -> observation 86192
which(j==86192) # 23th j
j <- j[-c(1:22)]
Seattle.Merged$Est[j] <- 1
# Add 1 for all of POT SHOP
j <- which(grepl("POT SHOP", Seattle.Merged$Name.Ret)) # 2016-03
unique(Seattle.Merged[j,1])
# 20XX BLOCK OF WESTERN AVE
j <- which(grepl("20XX BLOCK OF WESTERN AVE", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("20XX BLOCK OF WESTERN AVE", Seattle.Merged$Address.Narc) &
grepl("2016-03", Seattle.Merged$Month.Narc)) # earliest date -> observation 34825
which(j==34825) # 38th j
j <- j[-c(1:37)]
Seattle.Merged$Est[j] <- 1
# Add 1 for all of POT STOP
j <- which(grepl("POT STOP", Seattle.Merged$Name.Ret)) # 2016-03
unique(Seattle.Merged[j,1])
# 75XX BLOCK OF SEWARD PARK AVE S
j <- which(grepl("75XX BLOCK OF SEWARD PARK AVE S", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("75XX BLOCK OF SEWARD PARK AVE S", Seattle.Merged$Address.Narc) &
grepl("2016-03", Seattle.Merged$Month.Narc)) # earliest date -> observation 89441
which(j==89441) # 2th j
j <- j[-c(1)]
Seattle.Merged$Est[j] <- 1
# Add 1 for all of UNCLE IKES
j <- which(grepl("UNCLE IKES", Seattle.Merged$Name.Ret)) # 2016-06
unique(Seattle.Merged[j,1])
# XX BLOCK OF THOMAS ST
j <- which(grepl("XX BLOCK OF THOMAS ST", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("XX BLOCK OF THOMAS ST", Seattle.Merged$Address.Narc) &
grepl("2016-06", Seattle.Merged$Month.Narc)) # earliest date -> observation 65125
which(j==65125) # 53th j
j <- j[-c(1:52)]
Seattle.Merged$Est[j] <- 1
# Add 1 for all of VELA
j <- which(grepl("VELA", Seattle.Merged$Name.Ret)) # 2016-08
unique(Seattle.Merged[j,1])
# 15XX BLOCK OF 2ND AVE
j <- which(grepl("15XX BLOCK OF 2ND AVE", Seattle.Merged$Address.Narc))
Seattle.Merged[j, "Month.Narc"]
which(grepl("15XX BLOCK OF 2ND AVE", Seattle.Merged$Address.Narc) &
grepl("2016-08", Seattle.Merged$Month.Narc)) # earliest date -> observation 14329
which(j==14329) # 330th j
j <- j[-c(1:329)]
Seattle.Merged$Est[j] <- 1
# How many counts
table(Seattle.Merged$Est)
fit <- lm(Crime ~ Est, data=Seattle.Merged)
summary(fit)
names(Seattle.Merged)
fit <- lm(Crime ~ Est + Sales.Ret + ExciseTax.Ret, data=Seattle.Merged)
summary(fit)
fit <- lm(Crime ~ Est + Event.Clearance.Date +Sales.Ret + ExciseTax.Ret, data=Seattle.Merged)
Seattle.Merged$Event.Clearance.Date <- gsub('.{3}$', '',Seattle.Merged$Event.Clearance.Date)
Seattle.Merged$Event.Clearance.Date
fit <- lm(Crime ~ Est + Event.Clearance.Date + Sales.Ret + ExciseTax.Ret, data=Seattle.Merged)
summary(fit)
fit <- lm(Crime ~ Est + Month.Narc + Sales.Ret + ExciseTax.Ret, data=Seattle.Merged)
summary(fit)
fit <- lm(Crime ~ Est + Month.Ret + Sales.Ret + ExciseTax.Ret, data=Seattle.Merged)
summary(fit)
fit <- lm(Crime ~ Est + Sales.Ret + ExciseTax.Ret, data=Seattle.Merged)
summary(fit)
# Setting our working directory
table(Seattle.Merged$Event.Clearance.Description)
Seattle.Merged$Crime[Other] <- 0
Seattle.Merged$Crime[Weed.Only] <- 1
table(Seattle.Merged$Crime)
Seattle.Merged$Crime <- NA
Other <- which(grepl("LIQUOR", Seattle.Merged$Event.Clearance.Description) &
grepl("NARCOTICS", Seattle.Merged$Event.Clearance.Description) &
grepl("CASUALTY", Seattle.Merged$Event.Clearance.Description) &
grepl("DUI", Seattle.Merged$Event.Clearance.Description))
Seattle.Merged$Crime[Other] <- 0
Seattle.Merged$Crime[Weed.Only] <- 1
table(Seattle.Merged$Crime)
Other <- which(grepl("LIQUOR", Seattle.Merged$Event.Clearance.Description) |
grepl("NARCOTICS", Seattle.Merged$Event.Clearance.Description) |
grepl("CASUALTY", Seattle.Merged$Event.Clearance.Description) |
grepl("DUI", Seattle.Merged$Event.Clearance.Description))
Seattle.Merged$Crime[Other] <- 0
Seattle.Merged$Crime[Weed.Only] <- 1
table(Seattle.Merged$Crime)
fit2 <- lm(Crime ~ Est + Sales.Ret + ExciseTax.Ret, data=Seattle.Merged)
summary(fit2)
table(Seattle.Merged$Est)
fit2 <- lm(Crime ~ Est, data=Seattle.Merged)
summary(fit2)
fit2 <- lm(Crime ~ Est + Sales.Ret, data=Seattle.Merged)
summary(fit2)
fit2 <- lm(Crime ~ Est + Excise.Tax, data=Seattle.Merged)
summary(fit2)
fit2 <- lm(Crime ~ Est + ExciseTax.Ret, data=Seattle.Merged)
summary(fit2)
fit2 <- lm(Crime ~ Est, data=Seattle.Merged)
summary(fit2)
table(Seattle.Merged$Crime)
